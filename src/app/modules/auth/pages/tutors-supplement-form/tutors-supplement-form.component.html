<section class="fade">
  <div class="auth-section form-step section-content">
    <div class="flex flex-wrap w-full min-h-screen md:flex-nowrap">
      <div class="hidden w-full md:block">
        <div class="flex-middle w-full h-full pr-0 rounde d-lg">
          <div
            class="flex flex-col w-full h-full rounded-curve-bottom tutor-bg-extend"
          >
            <div class="py-5 form-header block-blur-white">
              <h2 class="mb-3 text-3xl font-bold text-gray-100">
                Obtenir des informations supplémentaires
              </h2>
              <p class="text-sm text-gray-300 form-description">
                Veuillez remplir le formulaire ci-dessous pour créer votre
                profil de tuteur. N’hésitez pas à ajouter autant de détails que
                nécessaire.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div
        class="w-full p-5 min-w-[250px] md:max-w-3xl bg-red-light rounded-curve-top"
      >
        <div class="container">
          <div class="w-full bg-red-light form-tutor">
            <div class="flex justify-center">
              <div class="w-full">
                <form
                  [formGroup]="tutorSupplementForm"
                  (ngSubmit)="saveTutorForm()"
                >
                  <div class="form-header lg:hidden">
                    <h2 class="mb-4 text-3xl font-bold">
                      Obtenir des informations supplémentaires
                    </h2>
                    <p class="text-sm form-description">
                      Veuillez remplir le formulaire ci-dessous pour créer votre
                      profil de tuteur. N’hésitez pas à ajouter autant de
                      détails que nécessaire.
                    </p>
                  </div>
                  <div class="shadow-md form-container min-h-[550px] bg-glace">
                    <!-- Etape 1: Informations personnelles -->
                    <div *ngIf="currentStep === 1">
                      <h3 class="mb-4 text-2xl font-bold">
                        Informations personnelles
                      </h3>
                      <p class="text-sm form-description">
                        Nous sommes ravis de vous accueillir en tant que tuteur!
                        Veuillez remplir le formulaire ci-dessous avec vos
                        informations personnelles. Nous sommes impatients d’en
                        savoir plus sur vous !
                      </p>
                      <div class="flex justify-center my-3">
                        <label for="photo" class="flex-col-middle w-max">
                          <input
                            type="file"
                            class="hidden w-full max-w-xs tw-file-input form-control tw-file-input-bordered"
                            id="photo"
                            (change)="onFileSelected($event)"
                            formControlName="photo"
                          />
                          <img
                            [src]="imagePath"
                            alt="Avatar"
                            class="object-cover w-32 h-32 transition-opacity duration-150 rounded-full opacity-75 cursor-pointer hover:opacity-100"
                          />
                          <p
                            class="flex items-center px-3 py-2 mt-3 border border-gray-300 rounded cursor-pointer text-gray gap-x-1"
                          >
                            <svg
                              class="w-5 h-5"
                              width="25"
                              height="25"
                              viewBox="0 0 25 25"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                d="M5.01953 7.83984H6.01953C6.54996 7.83984 7.05867 7.62913 7.43374 7.25406C7.80882 6.87898 8.01953 6.37028 8.01953 5.83984C8.01953 5.57463 8.12489 5.32027 8.31242 5.13274C8.49996 4.9452 8.75431 4.83984 9.01953 4.83984H15.0195C15.2847 4.83984 15.5391 4.9452 15.7266 5.13274C15.9142 5.32027 16.0195 5.57463 16.0195 5.83984C16.0195 6.37028 16.2302 6.87898 16.6053 7.25406C16.9804 7.62913 17.4891 7.83984 18.0195 7.83984H19.0195C19.55 7.83984 20.0587 8.05056 20.4337 8.42563C20.8088 8.8007 21.0195 9.30941 21.0195 9.83984V18.8398C21.0195 19.3703 20.8088 19.879 20.4337 20.2541C20.0587 20.6291 19.55 20.8398 19.0195 20.8398H5.01953C4.4891 20.8398 3.98039 20.6291 3.60532 20.2541C3.23024 19.879 3.01953 19.3703 3.01953 18.8398V9.83984C3.01953 9.30941 3.23024 8.8007 3.60532 8.42563C3.98039 8.05056 4.4891 7.83984 5.01953 7.83984Z"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              />
                              <path
                                d="M12.0195 16.8398C13.6764 16.8398 15.0195 15.4967 15.0195 13.8398C15.0195 12.183 13.6764 10.8398 12.0195 10.8398C10.3627 10.8398 9.01953 12.183 9.01953 13.8398C9.01953 15.4967 10.3627 16.8398 12.0195 16.8398Z"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              />
                            </svg>
                            <span>Uploader une photo</span>
                          </p>
                        </label>
                      </div>

                      <div class="">
                        <div class="relative w-full join-item">
                          <label for="hourlyRate" class="input-label"
                            >Taux horaire :</label
                          >
                          <div
                            class="input-icon"
                            [ngClass]="{
                              invalid:
                                tutorSupplementForm.get('hourlyRate')
                                  ?.touched &&
                                tutorSupplementForm.get('hourlyRate')?.invalid
                            }"
                          >
                            <input
                              type="text"
                              id="country"
                              type="number"
                              id="hourlyRate"
                              formControlName="hourlyRate"
                              placeholder="Entrez votre taux horaire"
                            />

                            <svg
                              class="w-6 h-6 icon right-icon"
                              width="80"
                              height="80"
                              viewBox="0 0 80 80"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                d="M38.333 31.667V13.333H31.667V35C31.667 36.843 33.157 38.333 35 38.333H53.333V31.667H38.333Z"
                                fill="currentColor"
                              />
                              <path
                                d="M35 56.666C36.8408 56.666 38.333 55.1738 38.333 53.333C38.333 51.4922 36.8408 50 35 50C33.1592 50 31.667 51.4922 31.667 53.333C31.667 55.1738 33.1592 56.666 35 56.666Z"
                                fill="currentColor"
                              />
                              <path
                                d="M16.667 38.333C18.5077 38.333 20 36.8408 20 35C20 33.1592 18.5077 31.667 16.667 31.667C14.8262 31.667 13.334 33.1592 13.334 35C13.334 36.8408 14.8262 38.333 16.667 38.333Z"
                                fill="currentColor"
                              />
                              <path
                                d="M70 52.5H63.333C61.491 52.5 60 51.009 60 49.167H59.993L60 49.163C60 47.321 61.491 45.833 63.333 45.833H70C71.843 45.833 73.33 47.324 73.33 49.167H80C80 43.646 75.518 39.167 70 39.163V31.667H63.333V39.167V39.163C57.812 39.163 53.333 43.64 53.333 49.163V49.167C53.333 54.688 57.812 59.167 63.333 59.167H70C71.843 59.167 73.33 60.657 73.33 62.5H73.327C73.327 64.343 71.836 65.833 69.993 65.833H63.33C61.491 65.833 60 64.343 60 62.5H53.333C53.333 68.021 57.812 72.5 63.333 72.5V80H70V72.5C75.518 72.493 79.997 68.021 79.997 62.5H80C80 56.979 75.518 52.5 70 52.5Z"
                                fill="currentColor"
                              />
                              <path
                                d="M61.175 24.16C56.917 13.894 46.807 6.667 35 6.667C19.349 6.667 6.667 19.349 6.667 35C6.667 50.647 19.349 63.333 35 63.333C38.841 63.333 42.5 62.562 45.843 61.175L48.396 67.334C44.268 69.046 39.746 70 35 70C15.671 70 0 54.329 0 35C0 15.671 15.671 0 35 0C49.583 0 62.073 8.926 67.334 21.608L61.175 24.16Z"
                                fill="currentColor"
                              />
                            </svg>
                          </div>
                          <div
                            *ngIf="
                              tutorSupplementForm.get('hourlyRate')?.errors &&
                              tutorSupplementForm.get('hourlyRate')?.invalid &&
                              tutorSupplementForm.get('hourlyRate')?.touched
                            "
                            class="absolute text-invalid block-error -bottom-4"
                            id="country-errors"
                          >
                            <p
                              *ngIf="tutorSupplementForm.get('hourlyRate')?.errors?.['required']"
                            >
                              <span class="font-medium">Oops!</span> hourlyRate
                              is required
                            </p>
                          </div>
                        </div>
                        <div class="relative w-full join-item">
                          <label for="ville" class="input-label"
                            >Biography :</label
                          >
                          <textarea
                            formControlName="biography"
                            placeholder="Dite nous quelque chose à propose de vous"
                            class="w-full textarea textarea-bordered textarea-lg"
                          ></textarea>

                          <div
                            *ngIf="
                              tutorSupplementForm.get('biography')?.errors &&
                              tutorSupplementForm.get('biography')?.invalid &&
                              tutorSupplementForm.get('biography')?.touched
                            "
                            class="absolute text-invalid block-error -bottom-4"
                            id="city-errors"
                          >
                            <p
                              *ngIf="tutorSupplementForm.get('biography')?.errors?.['required']"
                            >
                              <span class="font-medium">Oops!</span> Biography
                              is required
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Etape 2: Informations professionnelles -->
                    <div *ngIf="currentStep === 2">
                      <h2 class="mb-3 text-2xl font-bold">
                        Informations professionnelles
                      </h2>
                      <p class="mb-3 form-description">
                        Nous sommes convaincus que vous avez beaucoup à offrir
                        en tant que tuteur! Veuillez remplir le formulaire
                        ci-dessous avec vos informations professionnelles pour
                        nous aider à mieux comprendre votre expérience et vos
                        compétences.
                      </p>
                    </div>

                    <!-- Etape 4: Préférences de tutorat -->
                    <div *ngIf="currentStep === 2" class="mb-3">
                      <div class="w-full form-control">
                        <label class="label">
                          <span class="label-text">
                            Préférences de tutorat</span
                          > </label
                        ><input
                          type="text"
                          placeholder="Entrer vos specialisation"
                          class="w-full input input-bordered"
                        />
                      </div>
                      <div class="w-full form-control">
                        <label for="niveauScolaire">
                          <span class="label-text">Niveau scolaire </span
                          >:</label
                        >
                        <input
                          type="text"
                          id="niveauScolaire"
                          placeholder="Entrer votre niveau scolaire"
                          formControlName="niveauScolaire"
                          class="w-full input input-bordered"
                        />
                      </div>
                    </div>

                    <!-- Etape 6: Antécédents judiciaires -->
                    <div *ngIf="currentStep === 3">
                      <h2 class="mb-3 text-2xl font-bold">
                        Documents judiciaires
                      </h2>
                      <div class="pt-4 mb-6">
                        <label
                          class="mb-5 block text-xl font-semibold text-[#07074D]"
                          for="verificationAntecedents"
                        >
                          Upload File
                        </label>

                        <div class="mb-8">
                          <input
                            type="file"
                            name="file"
                            id="verificationAntecedents"
                            formControlName="verificationAntecedents"
                            class="sr-only"
                          />
                          <label
                            for="verificationAntecedents"
                            class="relative flex min-h-[200px] items-center justify-center rounded-md border border-dashed border-[#e0e0e0] p-12 cursor-pointer text-center"
                          >
                            <div>
                              <span
                                class="mb-2 block text-xl font-semibold text-[#07074D]"
                              >
                                Entrer vos document pour verifier vos
                                antécédents judiciaires
                              </span>
                              <span
                                class="inline-flex rounded border border-[#e0e0e0] py-2 px-7 text-base font-medium text-[#07074D]"
                              >
                                Browse
                              </span>
                            </div>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="mt-8 space-y-3" *ngIf="currentStep === 4">
                      <div class="grid grid-cols-1 space-y-2">
                        <label
                          class="text-sm font-bold tracking-wide text-gray-500"
                          >Titre de la video</label
                        >
                        <input
                          formControlName="videoTitle"
                          class="p-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500"
                          type="text"
                          placeholder="entrer le titre de la video"
                        />
                      </div>
                      <div class="grid grid-cols-1 space-y-2">
                        <label
                          class="text-sm font-bold tracking-wide text-gray-500 cursor-pointer"
                          >Attach Video</label
                        >
                        <div class="flex-middle w-full">
                          <label
                            class="flex flex-col w-full p-10 text-center border-4 border-dashed rounded-lg h-60 group"
                            id="video-file"
                          >
                            <div
                              class="flex-col-middle w-full h-full text-center"
                            >
                              <div
                                class="flex flex-auto w-2/5 mx-auto -mt-10 max-h-48"
                              >
                                <img
                                  class="object-center has-mask h-36"
                                  src="https://img.freepik.com/free-vector/image-upload-concept-landing-page_52683-27130.jpg?size=338&ext=jpg"
                                  alt="video image"
                                />
                              </div>
                              <p class="text-gray-500 pointer-none">
                                <span class="text-sm">Upload video</span> files
                                here
                              </p>
                            </div>
                            <input
                              formControlName="videoBio"
                              type="file"
                              class="hidden"
                              id="video-file"
                            />
                          </label>
                        </div>
                      </div>
                      <p class="text-sm text-gray-300">
                        <span>File type: mp4,webp,3gp of videos</span>
                      </p>
                    </div>
                  </div>
                  <div class="form-footer">
                    <div
                      class="items-center justify-between mt-10 button-container"
                    >
                      <button
                        *ngIf="currentStep > 1"
                        type="button"
                        class="px-5 mr-auto button btn hover:bg-yellow-600 button-primary"
                        (click)="previousStep()"
                      >
                        Précédent
                      </button>

                      <button
                        *ngIf="currentStep === 4; else notLast"
                        type="submit"
                        class="px-5 ml-auto btn hover:bg-yellow-600 button button-primary"
                      >
                        Soumettre
                      </button>
                      <ng-template #notLast>
                        <button
                          type="button"
                          class="px-5 ml-auto btn hover:bg-yellow-600 button button-primary"
                          (click)="nextStep()"
                        >
                          Suivant
                        </button>
                      </ng-template>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<app-alert
  *ngIf="submitForm"
  [alertTitle]="alert.alertTitle"
  [isShown]="alert.isShown"
  [alertType]="alert.alertType"
  [alertMessage]="alert.alertMessage"
/>
